---
import Layout from "../../layouts/Layout.astro";
import { getLangFromUrl, loadContentSafe } from "../../utils/i18n";

const lang = getLangFromUrl(Astro.url) || "si";
const galleryContent = await loadContentSafe(lang, "gallery");
const siteConfig = await loadContentSafe(lang, "site_config");
---

<Layout
    title={`${galleryContent.hero?.title} - ${siteConfig.organization?.name}`}
    description={galleryContent.hero?.description}
    lang={lang}
>
    <!-- Page Header -->
    <section
        class="bg-gradient-to-br from-orange-600 via-red-600 to-amber-600 text-white relative overflow-hidden"
    >
        <!-- Decorative Pattern -->
        <div class="absolute inset-0 opacity-10">
            <div
                class="absolute inset-0"
                style='background-image: url(&apos;data:image/svg+xml,<svg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g fill="%23ffffff" fill-opacity="0.1"><circle cx="7" cy="7" r="7"></circle><circle cx="53" cy="7" r="7"></circle><circle cx="7" cy="53" r="7"></circle><circle cx="53" cy="53" r="7"></circle></g></g></svg>&apos;); background-size: 60px 60px;'
            >
            </div>
        </div>
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 relative">
            <div class="max-w-3xl">
                <h1 class="text-4xl lg:text-5xl font-bold mb-4">
                    {galleryContent.hero?.title}
                </h1>
                <h2
                    class="text-2xl lg:text-3xl font-medium text-orange-100 mb-6"
                >
                    {galleryContent.hero?.subtitle}
                </h2>
                <p class="text-xl text-orange-100">
                    {galleryContent.hero?.description}
                </p>
            </div>
        </div>
    </section>

    <!-- Photo Categories -->
    <section class="py-16 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gray-900 mb-4">புகைப்பட வகைகள்</h2>
                <p class="text-lg text-gray-600">வகை அடிப்படையில் எங்கள் தொகுப்பை உலாவுங்கள்</p>
            </div>

            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6">
                {galleryContent.categories?.map((category) => (
                    <div class="bg-white rounded-lg shadow-md p-6 text-center hover:shadow-lg transition-shadow cursor-pointer">
                        <div class="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg class="w-8 h-8 text-orange-600" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
                            </svg>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-900 mb-2">{category.name}</h3>
                        <p class="text-gray-600 text-sm mb-2">{category.description}</p>
                        <div class="text-orange-600 font-medium">{category.count} புகைப்படங்கள்</div>
                    </div>
                ))}
            </div>
        </div>
    </section>

    <!-- Featured Albums -->
    <section class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gray-900 mb-4">சிறப்பு ஆல்பங்கள்</h2>
                <p class="text-lg text-gray-600">எங்கள் சமீபத்திய நிகழ்வுகள் மற்றும் செயல்பாடுகளின் சிறப்பம்சங்கள்</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                {galleryContent.featured_albums?.map((album) => (
                    <div class="bg-gray-50 rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow">
                        <!-- Album Cover -->
                        <div class={`h-48 bg-gradient-to-br ${album.cover_color || "from-orange-500 to-red-600"} relative`}>
                            <div class="absolute inset-0 bg-black/20"></div>
                            <div class="absolute bottom-4 left-4 right-4">
                                <div class="bg-white/20 backdrop-blur-sm rounded px-2 py-1 text-white text-sm font-medium inline-block">
                                    {album.image_count} புகைப்படங்கள்
                                </div>
                            </div>
                        </div>

                        <!-- Album Details -->
                        <div class="p-6">
                            <h3 class="text-xl font-bold text-gray-900 mb-1">{album.title}</h3>

                            <div class="flex items-center text-gray-600 mb-2">
                                <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
                                </svg>
                                <span class="text-sm">{album.date}</span>
                            </div>

                            <div class="flex items-center text-gray-600 mb-4">
                                <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                                </svg>
                                <span class="text-sm">{album.location}</span>
                            </div>

                            <p class="text-gray-700 text-sm mb-4">{album.description}</p>

                            <button class="bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors w-full">
                                ஆல்பத்தைப் பார்க்கவும்
                            </button>
                        </div>
                    </div>
                ))}
            </div>
        </div>
    </section>

    <!-- Recent Highlights -->
    <section class="py-16 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gray-900 mb-4">சமீபத்திய சிறப்பம்சங்கள்</h2>
                <p class="text-lg text-gray-600">எங்கள் படத்தொகுப்பில் சமீபத்திய சேர்க்கைகள்</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                {galleryContent.recent_highlights?.map((highlight) => (
                    <div class="bg-white rounded-lg p-6 shadow-sm hover:shadow-md transition-shadow">
                        <div class="w-full h-32 bg-gradient-to-br from-orange-200 to-red-300 rounded-lg mb-4 flex items-center justify-center">
                            <svg class="w-12 h-12 text-orange-600" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
                            </svg>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-900 mb-2">{highlight.title}</h3>
                        <p class="text-gray-600 text-sm mb-2">{highlight.description}</p>
                        <p class="text-orange-600 text-sm font-medium">{highlight.date}</p>
                    </div>
                ))}
            </div>
        </div>
    </section>

    <!-- Gallery Features -->
    <section class="py-16 bg-white">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">எங்கள் காட்சி கதையை ஆராயுங்கள்</h2>
            <p class="text-lg text-gray-600 mb-8">
                எங்கள் படத்தொகுப்பு கொண்டாட்டம், கற்றல் மற்றும் சமூக பந்தத்தின் தருணங்களின் மூலம் தமிழ் பண்பாட்டின் சாரத்தைப் பிடிக்கிறது.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
                <div class="text-center">
                    <div class="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8 text-orange-600" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">உயர் தரம்</h3>
                    <p class="text-gray-600 text-sm">ஒவ்வொரு சிறப்பு தருணத்தையும் பிடிக்கும் தொழில்முறை புகைப்படம்</p>
                </div>

                <div class="text-center">
                    <div class="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8 text-orange-600" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">வழக்கமான புதுப்பிப்புகள்</h3>
                    <p class="text-gray-600 text-sm">ஒவ்வொரு நிகழ்வு மற்றும் திட்டத்திற்குப் பிறகும் புதிய உள்ளடக்கம் சேர்க்கப்படுகிறது</p>
                </div>

                <div class="text-center">
                    <div class="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8 text-orange-600" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.50-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/>
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">எளிய பகிர்வு</h3>
                    <p class="text-gray-600 text-sm">குடும்பம் மற்றும் நண்பர்களுடன் உங்கள் விருப்பமான தருணங்களைப் பகிருங்கள்</p>
                </div>
            </div>

            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <button class="bg-orange-600 text-white px-8 py-3 rounded-lg hover:bg-orange-700 transition-colors">
                    எல்லா புகைப்படங்களையும் பார்க்கவும்
                </button>
                <button class="border border-gray-300 text-gray-700 px-8 py-3 rounded-lg hover:bg-gray-50 transition-colors">
                    புகைப்படங்களைச் சமர்ப்பிக்கவும்
                </button>
            </div>
        </div>
    </section>

    <!-- Photo Submission -->
    {galleryContent.submission && (
        <section class="py-16 bg-orange-50">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h2 class="text-3xl font-bold text-gray-900 mb-4">
                    {galleryContent.submission.title}
                </h2>
                <p class="text-lg text-gray-600 mb-8">
                    {galleryContent.submission.description}
                </p>

                {galleryContent.submission.guidelines && (
                    <div class="bg-white/50 backdrop-blur-sm rounded-xl p-6 mb-8 text-left max-w-2xl mx-auto">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">
                            சமர்ப்பிப்பு வழிகாட்டுதல்கள்
                        </h3>
                        <ul class="space-y-2 text-gray-700">
                            {galleryContent.submission.guidelines.map((guideline) => (
                                <li class="flex items-start">
                                    <svg class="w-5 h-5 text-orange-600 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                                    </svg>
                                    <span class="text-sm">{guideline}</span>
                                </li>
                            ))}
                        </ul>
                    </div>
                )}

                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <button class="bg-orange-600 text-white px-8 py-3 rounded-lg hover:bg-orange-700 transition-colors">
                        புகைப்படங்களைப் பதிவேற்றவும்
                    </button>
                    <button class="border border-gray-300 text-gray-700 px-8 py-3 rounded-lg hover:bg-gray-50 transition-colors">
                        புகைப்பட வழிகாட்டுதல்கள்
                    </button>
                </div>
            </div>
        </section>
    )}
</Layout>
